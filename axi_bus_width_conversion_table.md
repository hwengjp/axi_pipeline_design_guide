# AXIバス幅変換組み合わせ表

## 概要

このドキュメントは、AXIプロトコルにおけるバス幅変換の組み合わせを整理したものです。バス幅が増加するケースのみを対象とし、各変換パターンの特徴と実装上の考慮事項を明記しています。

## バス幅変換組み合わせ表

### 基本表（バス幅増加のみ）

| 変換元\変換先 | 8bit | 16bit | 32bit | 64bit | 128bit | 256bit | 512bit | 1024bit |
|---------------|------|-------|-------|-------|--------|--------|--------|---------|
| **8bit**      | -    | ✅    | ✅    | ✅    | ✅     | ✅     | ✅     | ✅      |
| **16bit**     | -    | -     | ✅    | ✅    | ✅     | ✅     | ✅     | ✅      |
| **32bit**     | -    | -     | -     | ✅    | ✅     | ✅     | ✅     | ✅      |
| **64bit**     | -    | -     | -     | -     | ✅     | ✅     | ✅     | ✅      |
| **128bit**    | -    | -     | -     | -     | -      | ✅     | ✅     | ✅      |
| **256bit**    | -    | -     | -     | -     | -      | -      | ✅     | ✅      |
| **512bit**    | -    | -     | -     | -     | -      | -      | -      | ✅      |
| **1024bit**   | -    | -     | -     | -     | -      | -      | -      | -       |

**凡例**:
- ✅: バス幅増加（変換可能）
- -: 同一バス幅またはバス幅減少（変換対象外）

## 詳細変換パターン

### 1. 8bit変換元

#### 8bit → 16bit
- **変換比率**: 1:2
- **バイト数**: 1バイト → 2バイト
- **実装難易度**: 🟢 簡単
- **用途**: 低帯域幅デバイス → 中帯域幅

#### 8bit → 32bit
- **変換比率**: 1:4
- **バイト数**: 1バイト → 4バイト
- **実装難易度**: 🟢 簡単
- **用途**: 低帯域幅デバイス → 標準帯域幅

#### 8bit → 64bit
- **変換比率**: 1:8
- **バイト数**: 1バイト → 8バイト
- **実装難易度**: 🟢 簡単
- **用途**: 低帯域幅デバイス → 高帯域幅

#### 8bit → 128bit
- **変換比率**: 1:16
- **バイト数**: 1バイト → 16バイト
- **実装難易度**: 🟡 普通
- **用途**: 低帯域幅デバイス → 超高帯域幅

#### 8bit → 256bit
- **変換比率**: 1:32
- **バイト数**: 1バイト → 32バイト
- **実装難易度**: 🟡 普通
- **用途**: 低帯域幅デバイス → 超高速帯域幅

#### 8bit → 512bit
- **変換比率**: 1:64
- **バイト数**: 1バイト → 64バイト
- **実装難易度**: 🟡 普通
- **用途**: 低帯域幅デバイス → 極高速帯域幅

#### 8bit → 1024bit
- **変換比率**: 1:128
- **バイト数**: 1バイト → 128バイト
- **実装難易度**: 🟡 普通
- **用途**: 低帯域幅デバイス → 最高速帯域幅

### 2. 16bit変換元

#### 16bit → 32bit
- **変換比率**: 1:2
- **バイト数**: 2バイト → 4バイト
- **実装難易度**: 🟢 簡単
- **用途**: 中帯域幅 → 標準帯域幅

#### 16bit → 64bit
- **変換比率**: 1:4
- **バイト数**: 2バイト → 8バイト
- **実装難易度**: 🟢 簡単
- **用途**: 中帯域幅 → 高帯域幅

#### 16bit → 128bit
- **変換比率**: 1:8
- **バイト数**: 2バイト → 16バイト
- **実装難易度**: 🟢 簡単
- **用途**: 中帯域幅 → 超高帯域幅

#### 16bit → 256bit
- **変換比率**: 1:16
- **バイト数**: 2バイト → 32バイト
- **実装難易度**: 🟡 普通
- **用途**: 中帯域幅 → 超高速帯域幅

#### 16bit → 512bit
- **変換比率**: 1:32
- **バイト数**: 2バイト → 64バイト
- **実装難易度**: 🟡 普通
- **用途**: 中帯域幅 → 極高速帯域幅

#### 16bit → 1024bit
- **変換比率**: 1:64
- **バイト数**: 2バイト → 128バイト
- **実装難易度**: 🟡 普通
- **用途**: 中帯域幅 → 最高速帯域幅

### 3. 32bit変換元

#### 32bit → 64bit
- **変換比率**: 1:2
- **バイト数**: 4バイト → 8バイト
- **実装難易度**: 🟢 簡単
- **用途**: 標準帯域幅 → 高帯域幅

#### 32bit → 128bit
- **変換比率**: 1:4
- **バイト数**: 4バイト → 16バイト
- **実装難易度**: 🟢 簡単
- **用途**: 標準帯域幅 → 超高帯域幅

#### 32bit → 256bit
- **変換比率**: 1:8
- **バイト数**: 4バイト → 32バイト
- **実装難易度**: 🟡 普通
- **用途**: 標準帯域幅 → 超高速帯域幅

#### 32bit → 512bit
- **変換比率**: 1:16
- **バイト数**: 4バイト → 64バイト
- **実装難易度**: 🟡 普通
- **用途**: 標準帯域幅 → 極高速帯域幅

#### 32bit → 1024bit
- **変換比率**: 1:32
- **バイト数**: 4バイト → 128バイト
- **実装難易度**: 🟡 普通
- **用途**: 標準帯域幅 → 最高速帯域幅

### 4. 64bit変換元

#### 64bit → 128bit
- **変換比率**: 1:2
- **バイト数**: 8バイト → 16バイト
- **実装難易度**: 🟢 簡単
- **用途**: 高帯域幅 → 超高帯域幅

#### 64bit → 256bit
- **変換比率**: 1:4
- **バイト数**: 8バイト → 32バイト
- **実装難易度**: 🟡 普通
- **用途**: 高帯域幅 → 超高速帯域幅

#### 64bit → 512bit
- **変換比率**: 1:8
- **バイト数**: 8バイト → 64バイト
- **実装難易度**: 🟡 普通
- **用途**: 高帯域幅 → 極高速帯域幅

#### 64bit → 1024bit
- **変換比率**: 1:16
- **バイト数**: 8バイト → 128バイト
- **実装難易度**: 🟡 普通
- **用途**: 高帯域幅 → 最高速帯域幅

### 5. 128bit変換元

#### 128bit → 256bit
- **変換比率**: 1:2
- **バイト数**: 16バイト → 32バイト
- **実装難易度**: 🟢 簡単
- **用途**: 超高帯域幅 → 超高速帯域幅

#### 128bit → 512bit
- **変換比率**: 1:4
- **バイト数**: 16バイト → 64バイト
- **実装難易度**: 🟡 普通
- **用途**: 超高帯域幅 → 極高速帯域幅

#### 128bit → 1024bit
- **変換比率**: 1:8
- **バイト数**: 16バイト → 128バイト
- **実装難易度**: 🟡 普通
- **用途**: 超高帯域幅 → 最高速帯域幅

### 6. 256bit変換元

#### 256bit → 512bit
- **変換比率**: 1:2
- **バイト数**: 32バイト → 64バイト
- **実装難易度**: 🟢 簡単
- **用途**: 超高速帯域幅 → 極高速帯域幅

#### 256bit → 1024bit
- **変換比率**: 1:4
- **バイト数**: 32バイト → 128バイト
- **実装難易度**: 🟡 普通
- **用途**: 超高速帯域幅 → 最高速帯域幅

### 7. 512bit変換元

#### 512bit → 1024bit
- **変換比率**: 1:2
- **バイト数**: 64バイト → 128バイト
- **実装難易度**: 🟢 簡単
- **用途**: 極高速帯域幅 → 最高速帯域幅

## 実装上の考慮事項

### アドレスサイクル
- **基本原則**: バス幅変換前後でアドレスサイクル数は変化しない
- **アドレス値**: 同じ（アライメント要件は同じ）
- **SIZE値**: 同じ（転送バイト数は同じ）

### STROBE位置の調整
- **計算式**: `STROBE位置 = アドレスの下位(log2(バス幅バイト数) - SIZE)ビット`
- **調整方法**: データのビット位置とストローブのビット位置の調整
- **実装**: シンプルなビットシフトによる変換

### データ配置
- **基本方針**: 書き込むバイト位置は同じ、データの配置だけを調整
- **上位ビット**: 通常は0で埋める
- **下位ビット**: 元のデータを配置

## 統計情報

### 総変換パターン数
**合計28パターン**のバス幅増加変換が可能です。

### 変換比率の分布
- **1:2変換**: 7パターン
- **1:4変換**: 6パターン
- **1:8変換**: 5パターン
- **1:16変換**: 4パターン
- **1:32変換**: 3パターン
- **1:64変換**: 2パターン
- **1:128変換**: 1パターン

### 実装難易度の分布
- **🟢 簡単**: 16パターン
- **🟡 普通**: 12パターン

## 推奨変換パターン

### 最適な変換パターン
1. **32bit → 64bit**: 最も一般的で実装が容易
2. **16bit → 32bit**: 組み込みシステムでよく使用
3. **64bit → 128bit**: 高性能システムで使用
4. **8bit → 16bit**: 低帯域幅システムの拡張

### 実装の優先順位
1. **高優先度**: 1:2変換（実装が最も簡単）
2. **中優先度**: 1:4変換（実装が容易）
3. **低優先度**: 1:8以上の変換（実装が複雑）

## まとめ

このドキュメントにより、AXIバス幅変換の全組み合わせが明確になり、実装すべき変換パターンを特定できます。基本的には、変換比率が小さい（1:2、1:4）パターンから実装を開始し、必要に応じて高比率の変換を追加することを推奨します。

各変換パターンにおいて、アドレスサイクルは変化せず、STROBE位置の調整とデータ配置の調整のみで実現可能です。

